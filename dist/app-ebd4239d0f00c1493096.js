webpackJsonp([0],[,,,function(e,n){},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.main={template:t(7),controller:function(e,n){var t=this;this.seedTrack={},this.userID="",this.energy=0,this.danceability=0,this.instrumentalness=0,this.valence=0,this.recommendations={},this.hideRecommendations=!1,this.searchResults=[],this.playlistCreated=!1,this.getUserTopTracks=function(){n.getUserTopTracks({limit:15}).then(function(e){var n=e.data.items,r=n[Math.floor(Math.random()*n.length)];t.seedTrack=r,t.getTrackAudioFeatures()}).catch(function(e){console.log(e.data.error),t.loggedIn=!1})},this.getUserID=function(){n.getCurrentUser().then(function(e){return t.userID=e.data.id})},localStorage.getItem("spotify-token")&&(this.getUserTopTracks(),this.getUserID(),this.loggedIn=!0),e.onload=function(){var n=e.location.hash;if(-1!==e.location.search.substring(1).indexOf("error"))e.close();else if(n){var t=e.location.hash.split("&")[0].split("=")[1];localStorage.setItem("spotify-token",t)}},this.login=function(){n.login().then(function(e){t.getUserTopTracks(),t.getUserID(),t.loggedIn=!0})},this.getTrackAudioFeatures=function(){n.getTrackAudioFeatures(t.seedTrack.id).then(function(e){t.energy=e.data.energy,t.danceability=e.data.danceability,t.instrumentalness=e.data.instrumentalness,t.valence=e.data.valence,t.getRecommendations()})},this.getRecommendations=function(){t.playlistCreated=!1,n.getRecommendations({seed_tracks:t.seedTrack.id,danceability:t.danceability,energy:t.energy,instrumentalness:t.instrumentalness,valence:t.valence,limit:20}).then(function(e){return t.recommendations=e.data.tracks})},this.search=function(e){e.length>0?(t.hideRecommendations=!0,n.search(e,"track",{limit:8}).then(function(e){t.searchResults=e.data.tracks.items})):(t.hideRecommendations=!1,t.searchResults=[])},this.setSeedTrack=function(e){t.seedTrack=e,t.searchResults=[],t.searchTrack="",t.hideRecommendations=!1,t.getTrackAudioFeatures(),t.getRecommendations()},this.createPlaylist=function(){n.createPlaylist(t.userID,{name:"Not my tempo"}).then(function(e){var r=e.data.id,a=t.recommendations.map(function(e){return e.uri});n.addPlaylistTracks(t.userID,r,a).then(function(e){return t.playlistCreated=!0})})}}}},function(e,n,t){"use strict";function r(e,n,t,r){t.html5Mode(!0).hashPrefix("!"),n.otherwise("/"),e.state("app",{url:"/",component:"app"}),r.setClientId("c456e69c7bb64cbb86929d493532d27d"),r.setRedirectUri("http://localhost:8080/"),r.setScope("user-top-read playlist-read-private playlist-modify-public"),r.setAuthToken(localStorage.getItem("spotify-token"))}r.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","SpotifyProvider"],Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},,function(e,n){e.exports='<main>\r\n  <section class="splash" ng-if="!$ctrl.loggedIn">\r\n    <h1>Not quite my tempo</h1>\r\n    <h2>Crea playlists de Spotify completamente a tu medida</h2>\r\n    <p>Hecha por Eva Millán usando la\r\n      <a href="https://beta.developer.spotify.com/documentation/web-api/" target="_blank">API de Spotify</a>\r\n       y AngularJS. Repositorio en\r\n      <a href="https://github.com/evamillan/tempo" target="_blank">Github</a>.\r\n    </p>\r\n    <p>Para usar la app tienes que loguearte.</p>\r\n    <button ng-click="$ctrl.login()">CONECTAR CON SPOTIFY</button>\r\n  </section>\r\n\r\n  <section class="app" ng-if="$ctrl.loggedIn">\r\n    <div class="equalizer">\r\n      <header>\r\n        <h1>Playlist inspirada en\r\n        <mark>{{ $ctrl.seedTrack.name }}</mark>\r\n        <br>\r\n        <mark>{{ $ctrl.seedTrack.artists[0].name }}</mark>\r\n        </h1>\r\n      </header>\r\n\r\n      <main>\r\n        <label for="danceability">Bailabilidad</label>\r\n        <input type="range" name="danceability" ng-model="$ctrl.danceability" ng-change="$ctrl.getRecommendations()" min="0.0" max="1" step="0.05">\r\n        <p>{{ $ctrl.danceability * 100 | number : 0 }}</p>\r\n\r\n        <label for="energy">Energía</label>\r\n        <input type="range" name="energy" ng-model="$ctrl.energy" ng-change="$ctrl.getRecommendations()" min="0.0" max="1" step="0.05">\r\n        <p>{{ $ctrl.energy * 100 | number : 0 }}</p>\r\n\r\n        <label for="instrumentalness">Instrumentalidad</label>\r\n        <input type="range" name="instrumentalness" ng-model="$ctrl.instrumentalness" ng-change="$ctrl.getRecommendations()" min="0.0" max="1" step="0.05">\r\n        <p>{{ $ctrl.instrumentalness * 100 | number : 0 }}</p>\r\n\r\n        <label for="valence">Alegría</label>\r\n        <input type="range" name="valence" ng-model="$ctrl.valence" ng-change="$ctrl.getRecommendations()" min="0.0" max="1" step="0.05">\r\n        <p>{{ $ctrl.valence * 100 | number : 0 }}</p>\r\n      </main>\r\n    </div>\r\n\r\n    <section class="recommendations">\r\n      <aside>\r\n        <input ng-model="$ctrl.searchTrack" ng-change="$ctrl.search($ctrl.searchTrack)" placeholder="buscar otra canción">\r\n      </aside>\r\n\r\n      <main>\r\n        <div class="tracks" ng-repeat="item in $ctrl.recommendations" ng-hide="$ctrl.hideRecommendations">\r\n          <p>{{ item.artists[0].name }}</p>\r\n          <hr>\r\n          <p><i>{{ item.name }}</i></p>\r\n        </div>\r\n\r\n        <div class="link" ng-repeat="item in $ctrl.searchResults" ng-click="$ctrl.setSeedTrack(item)">\r\n          <p>{{ item.artists[0].name }}</p>\r\n          <hr>\r\n          <p><i>{{ item.name }}</i></p>\r\n        </div>\r\n\r\n        <div class="buttons">\r\n          <button ng-if="!$ctrl.playlistCreated" ng-click="$ctrl.createPlaylist()" ng-hide="$ctrl.hideRecommendations">\r\n            CREAR PLAYLIST\r\n          </button>\r\n          <button ng-if="$ctrl.playlistCreated">PLAYLIST CREADA</button>\r\n        </div>\r\n      </main>\r\n    </section>\r\n  </section>\r\n</main>\r\n'},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.app=void 0;var a=t(0),i=r(a);t(1);var s=t(4);t(2);var c=t(5),l=r(c);t(3);var o=n.app="app";i.default.module(o,["ui.router","spotify"]).config(l.default).component("app",s.main)}],[8]);
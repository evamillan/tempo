webpackJsonp([0],[,,,function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.main={template:n(7),controller:["$window","Spotify",function(e,t){var n=this;this.seedTrack={},this.userID="",this.energy=0,this.danceability=0,this.instrumentalness=0,this.valence=0,this.recommendations={},this.hideRecommendations=!1,this.searchResults=[],this.playlistCreated=!1,this.getUserTopTracks=function(){t.getUserTopTracks({limit:15}).then(function(e){var t=e.data.items,a=t[Math.floor(Math.random()*t.length)];n.seedTrack=a,n.getTrackAudioFeatures()}).catch(function(e){console.log(e.data.error),n.loggedIn=!1})},this.getUserID=function(){t.getCurrentUser().then(function(e){return n.userID=e.data.id})},localStorage.getItem("spotify-token")&&(this.getUserTopTracks(),this.getUserID(),this.loggedIn=!0),e.onload=function(){var t=e.location.hash;if(-1!==e.location.search.substring(1).indexOf("error"))e.close();else if(t){var n=e.location.hash.split("&")[0].split("=")[1];localStorage.setItem("spotify-token",n)}},this.login=function(){t.login().then(function(e){n.getUserTopTracks(),n.getUserID(),n.loggedIn=!0})},this.getTrackAudioFeatures=function(){t.getTrackAudioFeatures(n.seedTrack.id).then(function(e){n.energy=e.data.energy,n.danceability=e.data.danceability,n.instrumentalness=e.data.instrumentalness,n.valence=e.data.valence,n.getRecommendations()})},this.getRecommendations=function(){n.playlistCreated=!1,t.getRecommendations({seed_tracks:n.seedTrack.id,danceability:n.danceability,energy:n.energy,instrumentalness:n.instrumentalness,valence:n.valence,limit:20}).then(function(e){return n.recommendations=e.data.tracks})},this.search=function(e){e.length>0?(n.hideRecommendations=!0,t.search(e,"track",{limit:8}).then(function(e){n.searchResults=e.data.tracks.items})):(n.hideRecommendations=!1,n.searchResults=[])},this.setSeedTrack=function(e){n.seedTrack=e,n.searchResults=[],n.searchTrack="",n.hideRecommendations=!1,n.getTrackAudioFeatures(),n.getRecommendations()},this.createPlaylist=function(){t.createPlaylist(n.userID,{name:"Not my tempo"}).then(function(e){var a=e.data.id,r=n.recommendations.map(function(e){return e.uri});t.addPlaylistTracks(n.userID,a,r).then(function(e){return n.playlistCreated=!0})})}}]}},function(e,t,n){"use strict";function a(e,t,n,a){switch(n.html5Mode(!0).hashPrefix("!"),t.otherwise("/"),e.state("app",{url:"/",component:"app"}),window.location.hostname){case"localhost":a.setRedirectUri("http://localhost:8080/");break;default:a.setRedirectUri("https://evamillan.github.io/tempo")}a.setClientId("c456e69c7bb64cbb86929d493532d27d"),a.setScope("user-top-read playlist-read-private playlist-modify-public"),a.setAuthToken(localStorage.getItem("spotify-token"))}a.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","SpotifyProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},,function(e,t){e.exports='<main>\r\n  <section class="splash" ng-if="!$ctrl.loggedIn">\r\n    <h1>Not quite my tempo</h1>\r\n    <h2>Crea playlists de Spotify completamente a tu medida</h2>\r\n    <p>Hecha por Eva Millán usando la\r\n      <a href="https://beta.developer.spotify.com/documentation/web-api/" target="_blank">API de Spotify</a>\r\n       y AngularJS. Repositorio en\r\n      <a href="https://github.com/evamillan/tempo" target="_blank">Github</a>.\r\n    </p>\r\n    <p>Para usar la app tienes que loguearte.</p>\r\n    <button ng-click="$ctrl.login()">CONECTAR CON SPOTIFY</button>\r\n  </section>\r\n\r\n  <section class="app" ng-if="$ctrl.loggedIn">\r\n    <div class="equalizer">\r\n      <header>\r\n        <h1>Playlist inspirada en\r\n        <mark>{{ $ctrl.seedTrack.name }}</mark>\r\n        <br>\r\n        <mark>{{ $ctrl.seedTrack.artists[0].name }}</mark>\r\n        </h1>\r\n      </header>\r\n\r\n      <main>\r\n        <label for="danceability">Bailabilidad</label>\r\n        <input type="range" name="danceability" ng-model="$ctrl.danceability" ng-change="$ctrl.getRecommendations()" min="0.0" max="1" step="0.05">\r\n        <p>{{ $ctrl.danceability * 100 | number : 0 }}</p>\r\n\r\n        <label for="energy">Energía</label>\r\n        <input type="range" name="energy" ng-model="$ctrl.energy" ng-change="$ctrl.getRecommendations()" min="0.0" max="1" step="0.05">\r\n        <p>{{ $ctrl.energy * 100 | number : 0 }}</p>\r\n\r\n        <label for="instrumentalness">Instrumentalidad</label>\r\n        <input type="range" name="instrumentalness" ng-model="$ctrl.instrumentalness" ng-change="$ctrl.getRecommendations()" min="0.0" max="1" step="0.05">\r\n        <p>{{ $ctrl.instrumentalness * 100 | number : 0 }}</p>\r\n\r\n        <label for="valence">Alegría</label>\r\n        <input type="range" name="valence" ng-model="$ctrl.valence" ng-change="$ctrl.getRecommendations()" min="0.0" max="1" step="0.05">\r\n        <p>{{ $ctrl.valence * 100 | number : 0 }}</p>\r\n      </main>\r\n    </div>\r\n\r\n    <section class="recommendations">\r\n      <aside>\r\n        <input ng-model="$ctrl.searchTrack" ng-change="$ctrl.search($ctrl.searchTrack)" placeholder="buscar otra canción">\r\n      </aside>\r\n\r\n      <main>\r\n        <div class="tracks" ng-repeat="item in $ctrl.recommendations" ng-hide="$ctrl.hideRecommendations">\r\n          <p>{{ item.artists[0].name }}</p>\r\n          <hr>\r\n          <p><i>{{ item.name }}</i></p>\r\n        </div>\r\n\r\n        <div class="link" ng-repeat="item in $ctrl.searchResults" ng-click="$ctrl.setSeedTrack(item)">\r\n          <p>{{ item.artists[0].name }}</p>\r\n          <hr>\r\n          <p><i>{{ item.name }}</i></p>\r\n        </div>\r\n\r\n        <div class="buttons">\r\n          <button ng-if="!$ctrl.playlistCreated" ng-click="$ctrl.createPlaylist()" ng-hide="$ctrl.hideRecommendations">\r\n            CREAR PLAYLIST\r\n          </button>\r\n          <button ng-if="$ctrl.playlistCreated">PLAYLIST CREADA</button>\r\n        </div>\r\n      </main>\r\n    </section>\r\n  </section>\r\n</main>\r\n'},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.app=void 0;var r=n(0),i=a(r);n(1);var s=n(4);n(2);var c=n(5),o=a(c);n(3);var l=t.app="app";i.default.module(l,["ui.router","spotify"]).config(o.default).component("app",s.main)}],[8]);